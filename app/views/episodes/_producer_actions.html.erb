<% episode = local_assigns[:episode] %>
<% use_ns = local_assigns[:use_producer_namespace] %>

<% start_path    = use_ns ? start_editing_producer_episode_path(episode) : start_editing_podcast_episode_path(episode.podcast, episode) %>
<% complete_path = use_ns ? complete_editing_producer_episode_path(episode) : complete_editing_podcast_episode_path(episode.podcast, episode) %>
<% publish_path  = publish_episode_podcast_episode_path(episode.podcast, episode) %>

<% if episode.edit_requested? %>
  <%= button_to start_path, method: :patch, class: "w-full bg-orange-600 hover:bg-orange-700 text-white font-medium py-3 px-4 rounded-lg text-center transition-colors duration-200", form: { class: "w-full" } do %>
    Start Editing
  <% end %>
<% elsif episode.editing? %>
  <% if episode.edited_audio.attached? %>
    <%= button_to complete_path, method: :patch, class: "w-full bg-green-600 hover:bg-green-700 text-white font-medium py-3 px-4 rounded-lg text-center transition-colors duration-200", form: { class: "w-full" } do %>
      Submit for Review
    <% end %>
  <% else %>
    <button disabled class="w-full bg-gray-200 text-gray-500 font-medium py-3 px-4 rounded-lg text-center cursor-not-allowed">
      Upload edited audio to submit for review
    </button>
  <% end %>
<% elsif episode.ready_to_publish? %>
  <%= button_to publish_path, method: :patch, class: "w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-lg text-center transition-colors duration-200", form: { class: "w-full" } do %>
    Publish Episode
  <% end %>
<% end %>
