<%# Summary %>

<%= render 'form', locals: { step: step, steps: @steps } do |f| %>
  <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">
    <div class="p-8">
      <%= render "podcast_steps/progress_bar", wizard_steps: @steps %>
      <% if @podcast.persisted? && @podcast.published? %>
        <h3 class="text-lg font-bold text-blue-800">
          Review and Edit Your Podcast
        </h3>

        <div class="mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg">
          <p class="mt-1 text-sm text-blue-600">
            Make any final changes to your podcast information below.
          </p>
        </div>
      <% else %>
        <h3 class="text-lg font-bold text-green-800">
          Review and Finalize Your Podcast
        </h3>

        <div class="mb-6 p-4 bg-green-50 border border-green-200 rounded-lg">
          <p class="mt-1 text-sm text-green-600">
            Review all your podcast information below and make any final changes before publishing.
          </p>
        </div>
      <% end %>

      <div class="space-y-6">
        <!-- Basic Information -->
        <div class="border-b border-gray-200 pb-6">
          <h3 class="text-lg font-medium text-gray-900 mb-4">Basic Information</h3>

          <div class="grid grid-cols-1 gap-4">
            <div class="field">
              <%= f.label :name, class: "block text-sm font-medium text-black" %>
              <%= f.text_field :name, class: "mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500" %>
            </div>

            <div class="field">
              <%= f.label :description, class: "block text-sm font-medium text-black" %>
              <%= f.text_area :description, rows: 4, class: "mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500" %>
            </div>
          </div>
        </div>

        <!-- Media -->
        <div class="border-b border-gray-200 pb-6">
          <h3 class="text-lg font-medium text-gray-900 mb-4">Media</h3>

          <div class="grid grid-cols-1">
            <!-- Cover Upload -->
            <div>
              <%= render "shared/file_upload",
                    form: f,
                    attachment_name: :cover_art,
                    multiple: false,
                    accept: "image/png,image/jpeg,image/webp",
                    existing_files: @podcast.cover_art.attached? ? [@podcast.cover_art] : [],
                    label_param: "cover_art_labels",
                    section_label: @podcast.cover_art.attached? ? "Current Cover Image" : "Upload Cover Image",
                    instructions: "Drag and drop your cover image here, or",
                    hint: "PNG, JPG, or WEBP" %>
              <%= hidden_field_tag "podcast[remove_cover_art]", "0", id: "podcast_remove_cover_art_summary" %>
            </div>
          </div>

          <!-- Website -->
          <div class="border-b border-gray-200 pb-6">
            <h3 class="text-lg font-medium text-gray-900 mb-4">Website</h3>

            <div class="field">
              <%= f.label :website_url, "Website (optional)", class: "block text-sm font-medium text-black" %>
              <%= f.text_field :website_url, placeholder: "www.example.com", class: "mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500" %>
              <p class="mt-1 text-xs text-gray-500">Enter your website URL (we'll automatically add https:// if needed)</p>
            </div>
          </div>

          <!-- Categories -->
          <div class="pb-6">
            <h3 class="text-lg font-medium text-gray-900 mb-4">Categories</h3>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
              <div class="field">
                <%= f.label :primary_category, "Primary Category", class: "block text-sm font-medium text-black" %>
                <%= f.select :primary_category, options_for_select(Podcast::CATEGORIES.map { |c| [c, c] }, @podcast.primary_category), { prompt: "Select a category" }, class: "mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500" %>
              </div>

              <div class="field">
                <%= f.label :secondary_category, "Secondary Category", class: "block text-sm font-medium text-black" %>
                <%= f.select :secondary_category, options_for_select(Podcast::CATEGORIES.map { |c| [c, c] }, @podcast.secondary_category), { include_blank: "(optional)" }, class: "mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500" %>
              </div>

              <div class="field">
                <%= f.label :tertiary_category, "Tertiary Category", class: "block text-sm font-medium text-black" %>
                <%= f.select :tertiary_category, options_for_select(Podcast::CATEGORIES.map { |c| [c, c] }, @podcast.tertiary_category), { include_blank: "(optional)" }, class: "mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500" %>
              </div>

              <div class="field">
                <%= f.label :episode_type, class: "block text-sm font-medium text-black" %>
                <%= f.select :episode_type, options_for_select(episode_type_options, @podcast.episode_type), { include_blank: "Please select a type" }, class: "mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500" %>
              </div>

              <div class="field">
                <%= f.label :explicit, class: "block text-sm font-medium text-black" %>
                <label class="inline-flex items-center space-x-2 mt-2">
                  <%= f.check_box :explicit, {class: "h-4 w-4 rounded-full border-gray-300 text-orange-600 focus:ring-orange-500"}, true, false %>
                  <span class="text-sm text-gray-700">Explicit content</span>
                </label>
              </div>

            </div>
          </div>
        </div>

        <%= render "podcast_steps/pagination", f: f, step: step %>
      </div>
    </div>
  </div>
<% end %>
